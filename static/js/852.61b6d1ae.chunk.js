"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[852],{9825:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(7021),s=n(579);const o=e=>{let{text:t,loading:n=!1}=e;return(0,s.jsx)(a.Ay,{type:"primary",loading:n,htmlType:"submit",block:!0,size:"large",children:t})}},5852:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var a=n(3003),s=n(5043),o=n(8273),r=n(9825);const l=(0,n(2099).Mz)([e=>e.contacts.items,e=>e.filter],((e,t)=>{if(!t)return{items:e};const n=t.toLowerCase();return{items:e.filter((e=>{let{name:t,phone:a}=e;return t.toLowerCase().includes(n)||a.includes(n)}))}})),i=e=>e.contacts,c="PhoneBookForm_form__ln2Qf",d="PhoneBookForm_label__hl1Ol",m="PhoneBookForm_input__rY+Ws";var u=n(579);const h={name:"",phone:""},p=()=>{const[e,t]=(0,s.useState)({...h}),{addLoading:n,error:l}=(0,a.d4)(i),p=(0,a.wA)(),x=e=>{let{target:n}=e;const{name:a,value:s}=n;t((e=>({...e,[a]:s})))};return(0,u.jsxs)("form",{className:c,onSubmit:n=>{n.preventDefault(),p((0,o.IP)({...e})),l||t({...h})},children:[(0,u.jsxs)("label",{className:d,children:["Name",(0,u.jsx)("input",{type:"text",className:m,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' \\-][a-zA-Z\u0430-\u044f\u0410-\u042f0-9 ])?[a-zA-Z\u0430-\u044f\u0410-\u042f0-9]*)*$",name:"name",onChange:x,value:e.name,required:!0})]}),(0,u.jsxs)("label",{className:d,children:["Number",(0,u.jsx)("input",{type:"phone",className:m,pattern:"\\+?\\d{1,4}?[ .\\-\\s]?\\(?\\d{1,3}?\\)?[ .\\-\\s]?\\d{1,4}[ .\\-\\s]?\\d{1,4}[ .\\-\\s]?\\d{1,9}",name:"phone",onChange:x,value:e.phone,required:!0})]}),(0,u.jsx)(r.A,{text:"Add contact",loading:n})]})};var x=n(2690),j=n(3726);const g="PhoneBookItem_table__sF38P";var A=n(7021),_=n(7407);const b=e=>{let{onClick:t}=e;return(0,u.jsx)(A.Ay,{icon:(0,u.jsx)(_.A,{}),"aria-label":"Edit",htmlType:"button",size:"small",onClick:t,children:"Edit"})},k=e=>{let{loading:t,onClick:n}=e;return(0,u.jsx)(A.Ay,{loading:t,htmlType:"button",size:"small",danger:!0,onClick:n,children:"Delete"})};var f=n(6597),v=n(6784),y=n(4194);const C=e=>{let{isModalOpen:t,onClose:n,children:a}=e;return(0,u.jsx)(y.A,{title:"Edit contact",footer:null,open:t,onCancel:n,children:a})},N=e=>{let{contact:t,onSubmit:n}=e;const{_id:l,name:h,phone:p}=t,[x,j]=(0,s.useState)({name:h,phone:p}),g=(0,a.wA)(),{editeLoading:A,error:_}=(0,a.d4)(i),b=e=>{let{target:t}=e;const{name:n,value:a}=t;j((e=>({...e,[n]:a})))};return(0,u.jsxs)("form",{className:c,onSubmit:e=>{e.preventDefault(),g((0,o.eY)({id:l,body:{...x}})),_||n()},children:[(0,u.jsxs)("label",{className:d,children:["Name",(0,u.jsx)("input",{type:"text",className:m,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' \\-][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",name:"name",onChange:b,value:x.name,required:!0})]}),(0,u.jsxs)("label",{className:d,children:["Number",(0,u.jsx)("input",{type:"phone",className:m,pattern:"\\+?\\d{1,4}?[ .\\-\\s]?\\(?\\d{1,3}?\\)?[ .\\-\\s]?\\d{1,4}[ .\\-\\s]?\\d{1,4}[ .\\-\\s]?\\d{1,9}",name:"phone",onChange:b,value:x.phone,required:!0})]}),(0,u.jsx)(r.A,{text:"Save changes",loading:A})]})},w=e=>{let{contacts:t}=e;const[n,r]=(0,s.useState)(!1),[l,i]=(0,s.useState)(null),[c,d]=(0,s.useState)(!1),m=(0,a.wA)(),h=()=>{r(!n)},p=[{title:"Name",dataIndex:"name",key:"name"},{title:"Phone number",dataIndex:"phone",key:"phone"},{title:"Action",key:"action",render:(e,t)=>(0,u.jsxs)(f.A,{gap:"small",justify:"center",children:[(0,u.jsx)(b,{onClick:()=>(i(t),void h())}),(0,u.jsx)(k,{loading:c,onClick:()=>{return e=t._id,d(!0),m((0,o.MO)(e)),void d(!1);var e}})]})}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.A,{rowKey:e=>e._id,pagination:!1,columns:p,dataSource:t,size:"small",bordered:!0,title:()=>"My contacts",className:g}),n&&(0,u.jsx)(C,{isModalOpen:n,onClose:h,children:(0,u.jsx)(N,{contact:l,onSubmit:h})})]})},z=()=>{const{items:e}=(0,a.d4)(l),{fetchLoading:t,error:n}=(0,a.d4)(i);return n&&j.Report.failure(n),(0,u.jsxs)(u.Fragment,{children:[t&&(0,u.jsx)(x.A,{}),Boolean(e.length)&&(0,u.jsx)(w,{contacts:e})]})};var S=n(6376);const F="PhoneBookFilter_filter__rm6bD",P="PhoneBookFilter_filterInput__mJAwe",B=()=>{const e=(0,a.wA)();return(0,u.jsx)("div",{className:F,children:(0,u.jsx)("input",{onChange:t=>{let{target:n}=t;return e((0,S.R)(n.value.toLowerCase()))},name:"filter",placeholder:"Find contact",className:P})})},L=()=>{const e=(0,a.wA)();return(0,s.useEffect)((()=>{e((0,o.oe)())})),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(p,{}),(0,u.jsx)(B,{}),(0,u.jsx)(z,{})]})},Z=()=>(0,u.jsx)("main",{children:(0,u.jsx)(L,{})})}}]);
//# sourceMappingURL=852.61b6d1ae.chunk.js.map